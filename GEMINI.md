# KIS 자동매매 GUI 프로그램

## 1. 프로젝트 개요

이 프로그램은 한국투자증권(KIS)에서 제공하는 Open Trading API를 활용하여 주식 정보를 조회하고, 향후 자동매매 기능까지 확장할 수 있는 기반을 제공하는 PyQt6 기반의 GUI 애플리케이션입니다.

`open-trading-api` 라이브러리를 참조하여 필요한 기능을 GUI 환경에서 쉽게 사용할 수 있도록 개발되었습니다.

## 2. 프로젝트 아키텍처

이 프로젝트는 향후 클라우드 서버 환경에서의 자동매매(Headless) 운영을 고려하여, 핵심 로직과 사용자 인터페이스(GUI)를 명확하게 분리하는 모듈식 구조로 설계되었습니다.

- **`core_logic.py` (핵심 로직)**: API 인증, 데이터 조회 등 모든 비즈니스 로직을 포함합니다. 이 모듈은 GUI와 완전히 독립적이므로, 서버 환경에서 단독으로 실행하여 자동매매 로직을 수행할 수 있습니다.
- **`main_gui.py` (GUI)**: 사용자에게 데이터를 보여주고 상호작용하는 뷰어(Viewer)의 역할을 합니다. 실제 데이터 처리는 `core_logic.py`에 요청하여 그 결과를 화면에 표시합니다.
- **`column_mappings.py` (설정)**: API가 반환하는 다소 복잡한 영문 컬럼명을 이해하기 쉬운 한글로 변환하기 위한 매핑 정보를 중앙에서 관리합니다.
- **`open-trading-api/` (참조 라이브러리)**: 한국투자증권에서 제공하는 공식 API 샘플 코드입니다. 우리 프로젝트는 이 라이브러리의 함수를 호출하여 실제 기능을 수행합니다. 이 폴더는 독립적인 Git 저장소이므로, 우리 프로젝트의 버전 관리 대상에서 제외됩니다 (`.gitignore` 설정).

## 3. 주요 기능

- **실시간 시세 조회**: 특정 종목(예: 삼성전자)의 현재 시세를 조회하여 표 형태로 표시합니다.
- **계좌 잔고 조회**: 보유 주식 현황과 계좌의 종합 평가 현황을 별도의 탭에 나누어 표 형태로 조회합니다.
- **탭 기반 인터페이스**: 각 조회 결과를 별도의 탭으로 분리하여 가독성과 사용성을 높였습니다.
- **동적 컬럼 선택**: 각 표(그리드)마다 표시하고 싶은 정보(컬럼)를 사용자가 직접 선택할 수 있습니다.
- **한글화**: API에서 반환되는 영문 컬럼명을 이해하기 쉬운 한글로 변환하여 표시합니다.

## 4. 설치 및 설정 방법

**1단계: 소스 코드 복제**

```bash
git clone https://github.com/koreainvestment/open-trading-api.git
```

**2단계: 필요 라이브러리 설치**

```bash
cd open-trading-api
py -m pip install -r requirements.txt
cd ..
```

**3단계: 설정 파일(`kis_devlp.yaml`) 생성 및 수정**

1.  **폴더 생성**: `C:\Users\<사용자이름>\KIS\config`
2.  **설정 파일 준비**: `open-trading-api/kis_devlp.yaml` 파일을 열어 본인 정보를 입력합니다.
3.  **설정 파일 복사**: 수정한 `kis_devlp.yaml` 파일을 위에서 생성한 `config` 폴더 안으로 복사합니다.

## 5. 프로그램 실행 방법

```bash
py main_gui.py
```

## 6. 파일 구조

```
C:\DigitalTwin\trade_stock
├── main_gui.py             # 메인 GUI 애플리케이션 (뷰어)
├── core_logic.py           # 핵심 비즈니스 로직 (API 호출, 데이터 처리)
├── column_mappings.py      # 컬럼명 한글 매핑 정보
├── open-trading-api/       # 한국투자증권 API 라이브러리 (Git 버전관리에서 제외됨)
├── test_balance.py         # 잔고 조회 기능 테스트용 스크립트
└── GEMINI.md               # 본 프로젝트 지침서
```

## 7. 소스 버전 관리 (Git)

이 프로젝트의 소스 코드는 Git으로 버전 관리되며, 아래 GitHub 저장소에서 관리됩니다.

- **저장소 주소:** `https://github.com/manin21st/trade_stock.git`

## 8. 로드맵 (Roadmap)

- [x] 1. 초기 환경 설정 및 API 연동
- [x] 2. 기본 GUI 뷰어 구현 (시세, 잔고 조회)
- [x] 3. 핵심 로직 모듈화 리팩토링 (`core_logic`, `column_mappings`)
- [x] 4. Git 버전 관리 및 GitHub 연동
- [x] 5. 프로젝트 문서 체계화
- [ ] 6. 실시간 데이터 조회 및 자동 갱신 (Websocket 연동)
- [ ] 7. 매수/매도 주문 기능 구현
- [ ] 8. 거래 전략 수립 및 구현
- [ ] 9. 서버 배포 및 자동 실행

## 9. 변경 이력 (Changelog)

### 2025-10-27
- 프로젝트 생성 및 초기 환경 설정 (Git, Python)
- PyQt6 기반 GUI 애플리케이션 골격 개발
- 주식 현재가 조회 기능 구현
- 계좌 잔고 조회 기능 구현 (보유 주식, 계좌 평가)
- 탭 인터페이스 및 데이터 그리드 뷰 적용
- 컬럼 선택 기능 및 한글 컬럼명 적용
- 핵심 로직과 GUI의 모듈화 리팩토링
- Git 연동 및 GitHub 저장소에 초기 버전 푸시
- 프로젝트 문서 구조화 및 작성